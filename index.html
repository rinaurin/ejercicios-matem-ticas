<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Ejercicios de Matemáticas</title>
<style>
  body {
    font-family: "Comic Sans MS", sans-serif;
    background: linear-gradient(135deg, #f9e2e7, #e3f6f5);
    margin: 0;
    padding: 20px;
    text-align: center;
  }
  h1 {
    color: #444;
  }
  .card {
    background: #fff;
    border-radius: 15px;
    padding: 20px;
    margin: 20px auto;
    max-width: 400px;
    box-shadow: 0 6px 15px rgba(0,0,0,0.1);
  }
  .operation {
    font-size: 2rem;
    text-align: right;
    margin-bottom: 10px;
    font-family: "Courier New", monospace;
  }
  .line {
    border-top: 3px solid #333;
    margin: 5px 0;
  }
  canvas {
    background: #fdfdfd;
    border: 2px solid #ccc;
    border-radius: 10px;
    margin-top: 10px;
    cursor: crosshair;
  }
  button {
    margin-top: 10px;
    padding: 10px 15px;
    border: none;
    border-radius: 8px;
    font-weight: bold;
    background: #a8dadc;
    color: #333;
    cursor: pointer;
  }
  button:hover {
    background: #90e0ef;
  }
  #feedback {
    font-weight: bold;
    margin-top: 10px;
  }
</style>
</head>
<body>

<h1>Ejercicios de Matemáticas</h1>

<div class="card">
  <div id="exerciseBox"></div>
  <canvas id="canvas" width="350" height="120"></canvas><br>
  <button id="btnCheck">Comprobar</button>
  <div id="feedback"></div>
</div>

<script>
const exercises = [
  {a:"2", op:"+", b:"3", ans:"5"},
  {a:"7", op:"-", b:"4", ans:"3"},
  {a:"9", op:"+", b:"6", ans:"15"},
  {a:"12", op:"-", b:"8", ans:"4"},
  {a:"15", op:"+", b:"7", ans:"22"},
  {a:"5,728", op:"-", b:"2,416", ans:"3,312"},
  {a:"3,506", op:"+", b:"4,289", ans:"7,795"},
  {a:"8,905", op:"-", b:"3,427", ans:"5,478"},
  {a:"7,324", op:"+", b:"2,678", ans:"10,002"},
  {a:"9,781", op:"-", b:"4,562", ans:"5,219"},
  {a:"6,432", op:"+", b:"1,569", ans:"8,001"},
  {a:"12,308", op:"-", b:"7,295", ans:"5,013"},
  {a:"4,751", op:"+", b:"3,249", ans:"8,000"},
  {a:"15,678", op:"-", b:"9,432", ans:"6,246"}
];

let index = 0;
const box = document.getElementById("exerciseBox");
const feedback = document.getElementById("feedback");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
let drawing = false;

function renderExercise() {
  if (index >= exercises.length) {
    box.innerHTML = "<h2>🎉 ¡Completaste todos los ejercicios!</h2>";
    document.getElementById("btnCheck").style.display = "none";
    return;
  }
  const ex = exercises[index];
  box.innerHTML = `
    <div class="operation">${ex.a}</div>
    <div class="operation">${ex.op} ${ex.b}</div>
    <div class="line"></div>
  `;
  clearCanvas();
  feedback.textContent = "";
}

function clearCanvas() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
}

// Dibujo
canvas.addEventListener("mousedown", e => {drawing = true; ctx.beginPath();});
canvas.addEventListener("mouseup", () => drawing = false);
canvas.addEventListener("mouseout", () => drawing = false);
canvas.addEventListener("mousemove", draw);
canvas.addEventListener("touchstart", e => {drawing=true; ctx.beginPath();});
canvas.addEventListener("touchend", ()=> drawing=false);
canvas.addEventListener("touchmove", draw);

function draw(e) {
  if (!drawing) return;
  const rect = canvas.getBoundingClientRect();
  const x = (e.touches? e.touches[0].clientX : e.clientX) - rect.left;
  const y = (e.touches? e.touches[0].clientY : e.clientY) - rect.top;
  ctx.lineWidth = 4;
  ctx.lineCap = "round";
  ctx.strokeStyle = "#000";
  ctx.lineTo(x,y);
  ctx.stroke();
  ctx.beginPath();
  ctx.moveTo(x,y);
}

// Botón comprobar
document.getElementById("btnCheck").addEventListener("click", ()=>{
  const successMsgs = ["¡Muy bien! 🎉", "¡Excelente! ✅", "¡Súper! 🚀"];
  const failMsgs = ["Intenta de nuevo ❌", "No pasa nada, vuelve a probar 💡"];
  
  // 🔹 Simulación automática (correcto siempre avanza)
  const correcto = true; 

  if (correcto) {
    feedback.style.color = "green";
    feedback.textContent = successMsgs[Math.floor(Math.random()*successMsgs.length)];
    setTimeout(()=>{ index++; renderExercise(); }, 1200);
  } else {
    feedback.style.color = "red";
    feedback.textContent = failMsgs[Math.floor(Math.random()*failMsgs.length)];
    setTimeout(()=>{ clearCanvas(); feedback.textContent=""; }, 1200);
  }
});

renderExercise();
</script>

</body>
</html>
